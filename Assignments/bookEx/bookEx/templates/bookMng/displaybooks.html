{% extends "base.html" %}
{% load static %}

{% block title %}
    Display Books
{% endblock title %}


{% block content %}
    <h1 align="center"> This is our Book Exchange System</h1>
    <table class='text-nowrap' border="2" width = "400">
        <tr>
            <th>Book Name</th>
            <th>Cover</th>
            <th>Rating</th>
        </tr>
        {% for book in book_list %}
            <tr>
                <td>
                    <a href="book_detail/{{ book.0.id }}">
                        {{ book.0.name }}
                    </a>
                </td>
                <td> <img src="{% static book.0.pic_path %}" height="200"> </td>
                <td class="p-1">
                    <form class ='rate-form {% if book.1 <= 2.0 %} text-muted {% endif %} {% if book.1 >= 4.0 %} font-weight-bold {% endif %}' action="ratebook" method="post">
                        <input type="hidden" name="book_id" value="{{ book.0.id }}">
                        <input type="hidden" name="user_id" value="{{ user.id }}">
                        <button type="submit" name="rating" value="1" class="fa fa-star {% if book.1 >= 1 %}checked{% endif %} invisible_button" id="1 star"></button>
                        <button type="submit" name="rating" value="2" class="fa fa-star {% if book.1 >= 2 %}checked{% endif %} invisible_button" id="2 stars"></button>
                        <button type="submit" name="rating" value="3" class="fa fa-star {% if book.1 >= 3 %}checked{% endif %} invisible_button" id="3 stars"></button>
                        <button type="submit" name="rating" value="4" class="fa fa-star {% if book.1 >= 4 %}checked{% endif %} invisible_button" id="4 stars"></button>
                        <button type="submit" name="rating" value="5" class="fa fa-star {% if book.1 >= 5 %}checked{% endif %} invisible_button" id="5 stars"></button>
                        {{ book.1 }}
                        {% csrf_token %}
                    </form>
                </td>
            </tr>
        {% endfor %}
    </table>
{% endblock content %}
